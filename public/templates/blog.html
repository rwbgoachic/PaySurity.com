<!-- Hero Section -->
<section class="hero">
  <div class="bg-grid"></div>
  <div class="hero-content">
    <h1>Payment <span class="text-blue">Insights</span></h1>
    <p class="hero-description">
      Industry news, trends, and expert advice for your payment processing needs.
    </p>
  </div>
</section>

<!-- Blog Posts Section -->
<section>
  <div class="container">
    <div class="two-column">
      <!-- Main Content -->
      <div>
        <div id="blog-posts">
          <!-- Blog posts will be loaded here by JavaScript -->
          <div class="post animate-on-scroll">
            <div class="post-header">
              <p class="post-date">April 16, 2025</p>
              <h2 class="post-title">The Future of Contactless Payments in a Post-Pandemic World</h2>
            </div>
            <p class="post-excerpt">
              The COVID-19 pandemic accelerated the adoption of contactless payment methods. Now, as we move forward, these technologies are becoming the new standard for transactions across all industries.
            </p>
            <a href="/blog/contactless-payments-future" class="post-link">
              Read more
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14M12 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
          
          <div class="post animate-on-scroll">
            <div class="post-header">
              <p class="post-date">April 14, 2025</p>
              <h2 class="post-title">How to Choose the Right POS System for Your Restaurant</h2>
            </div>
            <p class="post-excerpt">
              With so many options available, finding the perfect POS system for your restaurant can be overwhelming. This guide breaks down the essential features to look for and questions to ask before making your decision.
            </p>
            <a href="/blog/choosing-restaurant-pos" class="post-link">
              Read more
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14M12 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
          
          <div class="post animate-on-scroll">
            <div class="post-header">
              <p class="post-date">April 10, 2025</p>
              <h2 class="post-title">Reducing Fraud in E-commerce: Best Practices for Merchants</h2>
            </div>
            <p class="post-excerpt">
              Online fraud costs businesses billions each year. Learn the latest strategies and tools to protect your e-commerce business from fraudulent transactions and chargebacks.
            </p>
            <a href="/blog/ecommerce-fraud-prevention" class="post-link">
              Read more
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14M12 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
          
          <div class="post animate-on-scroll">
            <div class="post-header">
              <p class="post-date">April 5, 2025</p>
              <h2 class="post-title">The Rise of Buy Now, Pay Later: What Merchants Need to Know</h2>
            </div>
            <p class="post-excerpt">
              Buy Now, Pay Later (BNPL) solutions are rapidly transforming the payment landscape. Discover how offering BNPL options can increase your average order value and conversion rates.
            </p>
            <a href="/blog/buy-now-pay-later-guide" class="post-link">
              Read more
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14M12 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
          
          <div class="post animate-on-scroll">
            <div class="post-header">
              <p class="post-date">April 1, 2025</p>
              <h2 class="post-title">Omnichannel Retail: Connecting Online and In-Store Experiences</h2>
            </div>
            <p class="post-excerpt">
              Modern consumers expect seamless experiences across all shopping channels. Learn how to implement an effective omnichannel strategy that unifies your online and physical store operations.
            </p>
            <a href="/blog/omnichannel-retail-strategy" class="post-link">
              Read more
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14M12 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
        </div>
        
        <!-- Pagination -->
        <div class="mt-8 text-center">
          <button id="load-more" class="btn btn-primary">Load More Articles</button>
        </div>
      </div>
      
      <!-- Sidebar -->
      <div>
        <!-- Search -->
        <div class="card mb-8">
          <div class="card-content">
            <h3 class="card-title mb-4">Search</h3>
            <form id="search-form">
              <div class="form-group">
                <input type="text" id="search-input" name="search" placeholder="Search articles...">
              </div>
              <button type="submit" class="btn btn-primary">Search</button>
            </form>
          </div>
        </div>
        
        <!-- Categories -->
        <div class="card mb-8">
          <div class="card-content">
            <h3 class="card-title mb-4">Categories</h3>
            <ul class="pricing-features">
              <li><a href="/blog/category/payment-processing">Payment Processing</a></li>
              <li><a href="/blog/category/pos-systems">POS Systems</a></li>
              <li><a href="/blog/category/ecommerce">E-commerce</a></li>
              <li><a href="/blog/category/fraud-prevention">Fraud Prevention</a></li>
              <li><a href="/blog/category/industry-news">Industry News</a></li>
              <li><a href="/blog/category/small-business">Small Business</a></li>
            </ul>
          </div>
        </div>
        
        <!-- Featured Article -->
        <div class="card">
          <div class="card-content">
            <h3 class="card-title mb-4">Featured Article</h3>
            <h4 class="mb-2">Preparing Your Business for the Cashless Economy</h4>
            <p class="card-description mb-4">
              Cash usage continues to decline globally. Is your business prepared for a cashless future? Learn the essential steps to adapt and thrive.
            </p>
            <a href="/blog/cashless-economy-preparation" class="btn btn-ghost">Read Feature</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Newsletter Section -->
<section>
  <div class="container">
    <div class="card animate-on-scroll">
      <div class="card-content text-center">
        <h2 class="mb-4">Stay Updated on Payment Trends</h2>
        <p class="section-description mb-6">
          Subscribe to our newsletter for the latest industry insights, tips, and exclusive offers.
        </p>
        <form id="newsletter-form" class="max-w-md mx-auto">
          <div class="form-group">
            <input type="email" id="email" name="email" required data-name="Email" placeholder="Your email address">
          </div>
          <button type="submit" class="btn btn-primary">Subscribe</button>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- Blog Integration Script for News API -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Fetch news articles from our server-side API
  // This protects our API key and provides fallback content if the API is unavailable
  
  // Status message container
  const blogPostsContainer = document.getElementById('blog-posts');
  const loadingIndicator = document.createElement('div');
  loadingIndicator.className = 'loading-indicator';
  loadingIndicator.innerHTML = `
    <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-blue" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>
    <span>Loading latest payment industry news...</span>
  `;
  
  // Only show loading indicator if we're replacing existing content
  if (blogPostsContainer.children.length > 0) {
    blogPostsContainer.innerHTML = '';
    blogPostsContainer.appendChild(loadingIndicator);
  }
  
  async function fetchNewsArticles() {
    try {
      const response = await fetch('/api/news/payment-industry');
      
      if (!response.ok) {
        console.error('Error fetching news:', response.status, response.statusText);
        return;
      }
      
      const data = await response.json();
      
      if (data.status === 'ok' && data.articles && data.articles.length > 0) {
        // Clear any existing content or loading indicator
        blogPostsContainer.innerHTML = '';
        
        // Add articles to the container
        data.articles.forEach(article => {
          const postHtml = `
            <div class="post animate-on-scroll">
              <div class="post-header">
                <p class="post-date">${article.date}</p>
                <h2 class="post-title">${article.title}</h2>
              </div>
              <p class="post-excerpt">
                ${article.summary}
              </p>
              <a href="${article.url}" target="_blank" rel="noopener noreferrer" class="post-link">
                Read more
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14M12 5l7 7-7 7"></path>
                </svg>
              </a>
            </div>
          `;
          
          blogPostsContainer.innerHTML += postHtml;
        });
        
        // Add category badges to each post
        const posts = document.querySelectorAll('.post');
        posts.forEach((post, index) => {
          if (data.articles[index] && data.articles[index].category) {
            const categoryBadge = document.createElement('span');
            categoryBadge.className = 'category-badge';
            categoryBadge.textContent = data.articles[index].category;
            post.querySelector('.post-header').appendChild(categoryBadge);
          }
        });
      }
    } catch (error) {
      console.error('Error fetching or processing news articles:', error);
    }
  }
  
  // Fetch articles immediately
  fetchNewsArticles();
  
  // Newsletter form submission
  const newsletterForm = document.getElementById('newsletter-form');
  if (newsletterForm) {
    newsletterForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const email = document.getElementById('email').value;
      
      // This would normally submit to your server or newsletter service
      alert(`Thank you for subscribing with ${email}! You will now receive our latest updates.`);
      newsletterForm.reset();
    });
  }
  
  // Load more articles functionality
  const loadMoreButton = document.getElementById('load-more');
  if (loadMoreButton) {
    loadMoreButton.addEventListener('click', function() {
      // This would normally load the next page of articles
      alert('In a real implementation, this would load more articles from your API.');
    });
  }
});
</script>